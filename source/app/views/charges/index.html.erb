<p id="notice"><%= notice %></p>

<h1><%= t 'charges.failed' %></h1>

<table class="charges failed_charges">
  <thead>
    <tr>
      <th>Customer</th>
      <th>Amount</th>
      <th>Failed at</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @charges.where(paid: false).each do |charge| %>
      <tr>
        <td><%= charge.customer.first_name %></td>
        <td><%= charge.amount %></td>
        <td><%= charge.updated_at.strftime("%Y/%m/%d") %></td>

        <td><%= link_to 'Show', charge %></td>
        <td><%= link_to 'Edit', edit_charge_path(charge) %></td>
        <td><%= link_to 'Destroy', charge, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<h1><%= t 'charges.disputed' %></h1>

<table class="charges disputed_charges">
  <thead>
    <tr>
      <th>Customer</th>
      <th>Amount</th>
      <th>Disputed at</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @charges.where(refunded: true).each do |charge| %>
      <tr>
        <td><%= charge.customer.first_name %></td>
        <td><%= charge.amount %></td>
        <td><%= charge.updated_at.strftime("%Y/%m/%d") %></td>

        <td><%= link_to 'Show', charge %></td>
        <td><%= link_to 'Edit', edit_charge_path(charge) %></td>
        <td><%= link_to 'Destroy', charge, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<h1><%= t 'charges.successful' %></h1>

<table class="charges successful_charges">
  <thead>
    <tr>
      <th>Customer</th>
      <th>Created</th>
      <th>Paid</th>
      <th>Amount</th>
      <th>Currency</th>
      <th>Refunded</th>
      <th>Customer</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @charges.where(paid: true, refunded: false).each do |charge| %>
      <tr>
        <td><%= charge.customer.first_name %></td>
        <td><%= charge.created %></td>
        <td><%= charge.paid %></td>
        <td><%= charge.amount %></td>
        <td><%= charge.currency %></td>
        <td><%= charge.refunded %></td>
        <td><%= charge.customer_id %></td>

        <td><%= link_to 'Show', charge %></td>
        <td><%= link_to 'Edit', edit_charge_path(charge) %></td>
        <td><%= link_to 'Destroy', charge, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Charge', new_charge_path %>
